# Installing Fedora 19 and freedreno on ifc6410

Instructions for installing Fedora 19 for the [ifc6410](http://inforcecomputing.com/blog/?p=27) pico-itx board.  These instructions will setup a Fedora filesystem on an external usb or sata disk for the ifc6410.  The same basic procedure should work for installation to an micro-sd card.  These instructions are not intended for installation to eMMC.

Note that these instructions are work-in-progress.

1. Download Fedora 19 [filesystem](https://dl.fedoraproject.org/pub/fedora-secondary/releases/test/19-Beta/Images/armhfp/Fedora-armhfp-19-Beta-1-sda.raw.xz), see https://fedoraproject.org/wiki/Architectures/ARM/F19/Beta
2. If you haven't already, install adb, fastboot, abootimg.  If your host is fedora, you can `sudo yum install android-tools`
2. While you are waiting for the downloads, boot android which came on the ifc6410 board, and save off the firmware:
 * connect to device: `adb shell`
 * on device, `cd /system/etc; tar czvf /data/firmware.tgz firmware`
 * back on host: `adb pull /data/firmware.tgz`
3. on your host, `xzcat Fedora-armhfp-19-Beta-1-sda.raw.xz > /dev/sdN`  (ie, `/dev/sdb`) to extract filesystem to usb or sata disk that you will use  
4. Use gparted or similar tool to resize the 3rd partition (rootfs) to the remaining size of the disk.  Or optionally create a 4th partition for `/home`.
 * NOTE: I had to `sync`, then remove and re-plug my USB disk before using gparted to resize.
4. mount to rootfs partition, /dev/sdN3, and extract the firmware we saved earlier:
 * `cd <mountpath>/lib; tar xzvf path/to/firmware.tgz`
5. Install X11 and gnome-desktop:
 * `yum install xorg-x11-server-Xorg xorg-x11-drv-evdev @gnome-desktop`
6. Additional things that I install for building freedreno, etc:  (not required)
 * `yum install @development-tools automake autoconf xorg-x11-server-devel libX11-devel libXext-devel libtool libXau-devel libXdamage-devel libXfixes-devel libXxf86vm-devel libxcb-devel pixman-devel xorg-x11-proto-devel xorg-x11-util-macros gcc-c++ vim strace git tig htop`
 * `yum-builddep mesa-libGL`
7. xorg conf file, `/etc/X11/xorg.conf.d/90-freedreno.conf` (listed below)
8. If you don't feel like compiling libddrm/mesa/xf86-video-freedreno, then:
 * `cd / ; wget http://people.freedesktop.org/~robclark/ifc6410-freedreno.tgz ; tar xzvf ifc6410-freedreno.tgz`

### xorg conf file:

    Section "Device"
            Identifier      "Video Device"
            Driver          "freedreno"
            Option          "fb"              "/dev/fb0"
    #        Option          "Debug"           "true"
    EndSection
    Section "Screen"
            Identifier      "Screen"
            Monitor         "Monitor"
            Device          "Video Device"
    EndSection

